<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>9 Огноотой ажиллах нь | Тархвар судлаачийн R гарын авлага</title>
<meta name="author" content="гарын авлагын баг">
<meta name="description" content="R дээр огноог ашиглах нь бусад объектын төрлүүдтэй ажиллахаас илүү анхаарал шаарддаг. Доор бид энэ үйл явцыг арай хялбар болгохын тулд зарим хэрэгсэл, жишээг санал болгож байна. Аз болоход...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="9 Огноотой ажиллах нь | Тархвар судлаачийн R гарын авлага">
<meta property="og:type" content="book">
<meta property="og:description" content="R дээр огноог ашиглах нь бусад объектын төрлүүдтэй ажиллахаас илүү анхаарал шаарддаг. Доор бид энэ үйл явцыг арай хялбар болгохын тулд зарим хэрэгсэл, жишээг санал болгож байна. Аз болоход...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="9 Огноотой ажиллах нь | Тархвар судлаачийн R гарын авлага">
<meta name="twitter:description" content="R дээр огноог ашиглах нь бусад объектын төрлүүдтэй ажиллахаас илүү анхаарал шаарддаг. Доор бид энэ үйл явцыг арай хялбар болгохын тулд зарим хэрэгсэл, жишээг санал болгож байна. Аз болоход...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.20/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Тархвар судлаачийн R гарын авлага</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Preview pages</li>
<li><a class="" href="%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%86%D0%B8%D0%B9%D0%BD-%D0%B1%D0%BE%D0%BB%D0%BE%D0%BD-%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D0%BA%D0%B8%D0%B9%D0%BD-%D1%82%D1%8D%D0%BC%D0%B4%D1%8D%D0%B3%D0%BB%D1%8D%D0%BB.html"><span class="header-section-number">1</span> Редакцийн болон техникийн тэмдэглэл</a></li>
<li><a class="" href="%D0%B3%D0%B0%D1%80%D1%8B%D0%BD-%D0%B0%D0%B2%D0%BB%D0%B0%D0%B3%D0%B0-%D3%A9%D0%B3%D3%A9%D0%B3%D0%B4%D0%BB%D0%B8%D0%B9%D0%B3-%D1%82%D0%B0%D1%82%D0%B0%D0%B6-%D0%B0%D0%B2%D0%B0%D1%85.html"><span class="header-section-number">2</span> Гарын авлага, өгөгдлийг татаж авах</a></li>
<li><a class="" href="r-%D1%81%D1%83%D1%83%D1%80%D1%8C-%D0%BE%D0%B9%D0%BB%D0%B3%D0%BE%D0%BB%D1%82%D1%83%D1%83%D0%B4.html"><span class="header-section-number">3</span> R суурь ойлголтууд</a></li>
<li><a class="" href="r-%D1%80%D1%83%D1%83-%D1%88%D0%B8%D0%BB%D0%B6%D0%B8%D1%85.html"><span class="header-section-number">4</span> R руу шилжих</a></li>
<li><a class="" href="%D1%81%D0%B0%D0%BD%D0%B0%D0%BB-%D0%B1%D0%BE%D0%BB%D0%B3%D0%BE%D1%85-%D0%B1%D0%B0%D0%B3%D1%86%D1%83%D1%83%D0%B4.html"><span class="header-section-number">5</span> Санал болгох багцууд</a></li>
<li><a class="" href="r-%D1%82%D3%A9%D1%81%D3%A9%D0%BB.html"><span class="header-section-number">6</span> R төсөл</a></li>
<li><a class="" href="%D1%84%D0%B0%D0%B9%D0%BB-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%BB%D0%BE%D0%B6-%D1%8D%D0%BA%D1%81%D0%BF%D0%BE%D1%80%D1%82%D0%BB%D0%BE%D1%85.html"><span class="header-section-number">7</span> Файл импортлож экспортлох</a></li>
<li><a class="" href="%D0%B4%D0%B0%D1%82%D0%B0-%D1%86%D1%8D%D0%B2%D1%8D%D1%80%D0%BB%D1%8D%D0%B3%D1%8D%D1%8D-%D0%B1%D0%B0-%D2%AF%D0%BD%D0%B4%D1%81%D1%8D%D0%BD-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D1%83%D1%83%D0%B4.html"><span class="header-section-number">8</span> Дата цэвэрлэгээ ба үндсэн функцууд</a></li>
<li><a class="active" href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html"><span class="header-section-number">9</span> Огноотой ажиллах нь</a></li>
<li><a class="" href="%D0%BA%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80-%D0%B1%D0%B0-%D1%81%D1%82%D1%80%D0%B8%D0%BD%D0%B3%D1%81.html"><span class="header-section-number">10</span> Карактер ба стрингс</a></li>
<li><a class="" href="%D1%84%D0%B0%D0%BA%D1%82%D0%BE%D1%80.html"><span class="header-section-number">11</span> Фактор</a></li>
<li><a class="" href="%D0%B4%D0%B0%D1%82%D0%B0%D0%B3-%D0%BF%D0%B8%D0%B2%D0%BE%D1%82-%D1%85%D0%B8%D0%B9%D1%85.html"><span class="header-section-number">12</span> Датаг пивот хийх</a></li>
<li><a class="" href="%D0%B4%D0%B0%D1%82%D0%B0%D0%B3-%D0%B1%D2%AF%D0%BB%D1%8D%D0%B3%D0%BB%D1%8D%D1%85.html"><span class="header-section-number">13</span> Датаг бүлэглэх</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="огноотой-ажиллах-нь" class="section level1" number="9">
<h1>
<span class="header-section-number">9</span> Огноотой ажиллах нь<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/Dates_500x500.png" width="50%" style="display: block; margin: auto;"></div>
<p>R дээр огноог ашиглах нь бусад объектын төрлүүдтэй ажиллахаас илүү анхаарал шаарддаг. Доор бид энэ үйл явцыг арай хялбар болгохын тулд зарим хэрэгсэл, жишээг санал болгож байна. Аз болоход <strong>lubridate</strong> гэх мэт багцуудын тусламжтайгаар, практик дадлагын үр дүнд огноог хялбархан янзалж чаддаг болно.</p>
<p>Боловсруулаагүй өгөгдлийг R руу импортлох үед огноог ихэвчлэн тэмдэгт (character) обьект хэмээн таньж оруулдаг бөгөөд энэ обьектыг цагийн цуврал хийх, хугацааны интервалыг тооцоолох гэх мэт огнооны ерөнхий үйлдлүүдэд ашиглах боломжгүй байдаг. Дээрээс нь огноог форматлах олон арга байдаг тул та огнооны аль хэсэг нь юу болохыг (сар, өдөр, цаг гэх мэт) танихад нь R-д туслах шаардлагатай болдог нь огноотой ажиллах процессыг улам төвөгтэй болгодог.</p>
<p>R дахь огноо нь өөрсдийн гэсэн объектын ангитай буюу <code>Date</code> анги юм. Энд огноо, цаг хоёуланг нь агуулсан объектуудыг хадгалдаг тусгай анги бас байдаг гэдгийг тэмдэглэх нь зүйтэй. Огноо, цагийн объектуудыг албан ёсоор <code>POSIXt</code>, <code>POSIXct</code> ба/эсвэл <code>POSIXlt</code> анги гэж нэрлэдэг (ялгаа нь чухал биш). Эдгээр объектыг албан бусаар <em>datetime</em> ангид оруулдаг.</p>
<ul>
<li><p>Багана нь огноог агуулсан бол R-д тухайн баганыг огноо гэдгийг таниулах нь чухал.</p></li>
<li><p>Огноо бол объектын ангилал бөгөөд түүнтэй ажиллахад төвөгтэй байдаг.</p></li>
<li>
<p>Энд бид огноо агуулсан багануудыг <code>Date</code> анги руу хөрвүүлэх хэд хэдэн аргыг танилцуулж байна.</p>
<!-- ======================================================= -->
</li>
</ul>
<div id="бэлтгэл" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Бэлтгэл<a class="anchor" aria-label="anchor" href="#%D0%B1%D1%8D%D0%BB%D1%82%D0%B3%D1%8D%D0%BB"><i class="fas fa-link"></i></a>
</h2>
<div id="багцуудыг-ачаалах" class="section level3 unnumbered">
<h3>Багцуудыг ачаалах<a class="anchor" aria-label="anchor" href="#%D0%B1%D0%B0%D0%B3%D1%86%D1%83%D1%83%D0%B4%D1%8B%D0%B3-%D0%B0%D1%87%D0%B0%D0%B0%D0%BB%D0%B0%D1%85"><i class="fas fa-link"></i></a>
</h3>
<p>Доорх кодын хэсэг нь энэ хуудсанд шаардлагатай багцуудын ачааллыг харуулж байна. Энэхүү гарын авлагад бид <strong>pacman</strong> багцаас <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> функцыг онцлон ашиглаж буй бөгөөд энэ функц нь шаардлагатай бол тухайн багцыг шууд суулгаж, ашиглахаар ачаалдаг. Мөн та аль хэдийн суулгасан багцуудыг <strong>base</strong> R-ын <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> функц ашиглан ачаалж болно. R багцуудын талаар дэлгэрэнгүй мэдээллийг <span class="math display">\[R суурь ойлголтууд\]</span> хуудаснаас үзнэ үү.</p>
<div class="sourceCode" id="cb318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Багц суулгасан эсэхийг шалгаж, шаардлагатай бол суулгаж, одоогийн сесс рүү багцыг ачаална</span>

<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span>
  <span class="va">lubridate</span>,  <span class="co"># огноог зохицуулах, хөрвүүлэх ерөнхий багц</span>
  <span class="va">linelist</span>,   <span class="co"># замбараагүй огноог "таах" функцтэй </span>
  <span class="va">aweek</span>,      <span class="co"># огноог долоо хоног, долоо хоногийг огноо болгон хөрвүүлэх өөр сонголт</span>
  <span class="va">zoo</span>,        <span class="co"># нэмэлт огноо/цаг функцүүд</span>
  <span class="va">tidyverse</span>,  <span class="co"># дата менежмент болон дүрслэл</span>
  <span class="va">rio</span><span class="op">)</span>        <span class="co"># дата импорт/экспорт</span></code></pre></div>
</div>
<div id="дата-импортлох-1" class="section level3 unnumbered">
<h3>Дата импортлох<a class="anchor" aria-label="anchor" href="#%D0%B4%D0%B0%D1%82%D0%B0-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%BB%D0%BE%D1%85-1"><i class="fas fa-link"></i></a>
</h3>
<p>Бид Эбола тахлын зохиомол тохиолдлын датасетийг импортолж байна. Хэрэв та датаг татаж аван алхам алхмаар дагахыг хүсвэл <span class="math display">\[Гарын авлага, дата татаж авах\]</span> хуудасны зааврыг харна уу. Бид энэ файлыг ажлын директор дотор байгаа гэж үзэж байгаа тул энэ файлын замд дэд хавтас заагаагүй болно.</p>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.xlsx"</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="одоогийн-огноо" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> Одоогийн огноо<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B4%D0%BE%D0%BE%D0%B3%D0%B8%D0%B9%D0%BD-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE"><i class="fas fa-link"></i></a>
</h2>
<p>Та <strong>base</strong> R дээр дараах зүйлийг хийснээр таны компьютерийн одоогийн “систем” огноо эсвэл системийн огнооцагийг авах боломжтой.</p>
<div class="sourceCode" id="cb320"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># системийн огноог авах - энэ бол DATE анги юм</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2022-01-05"</code></pre>
<div class="sourceCode" id="cb322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># системийн цагийг авах - энэ бол DATETIME анги юм </span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2022-01-05 18:16:53 +08"</code></pre>
<p><strong>lubridate</strong> багцын тусламжтайгаар эдгээрийг <code>today()</code> болон <code>now()</code> функцүүдээр тус тус авах боломжтой. <code><a href="https://rdrr.io/r/base/date.html">date()</a></code> функц нь өдөр, сарын нэрийн хамт одоогийн огноо, цагийг харуулна.</p>
<!-- ======================================================= -->
</div>
<div id="огноо-руу-хөрвүүлэх" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Огноо руу хөрвүүлэх<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE-%D1%80%D1%83%D1%83-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85"><i class="fas fa-link"></i></a>
</h2>
<p>Датасетийг R руу импортлосны дараа огнооны баганын утгууд “1989/12/30”, “05/06/2014”, эсвэл “2020 оны 1-р сарын 13” гэх мэтээр харагдаж болно. Эдгээр тохиолдолд R нь эдгээр утгуудыг тэмдэгт утга гэж оруулсан байх магадлалтай. Эдгээр утгууд нь огноо мөн… бөгөөд огнооны формат ямар байхыг R-д <em>хэлж өгөх</em> шаардлагатай (аль хэсэг нь Өдөр, аль нь Сар, аль нь Жил гэх мэт).</p>
<p>Ингээд хэлээд өгөхөд R эдгээр утгыг <code>Date</code> анги руу хөрвүүлдэг. Харин хөшигний цаана R огноог тоогоор хадгална (1970 оны 1-р сарын 1-ний “эх” өдрөөс хойшхи өдрийн тоо). Та огнооны энэхүү тоотой бараг харьцахгүй боловч R огноог ингэж хадгалснаар огноог үргэлжилсэн (continuous) хувьсагч гэж үзэн огноо хоорондын зайг тооцоолох зэрэг тусгай үйлдлүүдийг хийх боломжийг олгодог.</p>
<p>Өгөгдмөлөөр, R дахь <code>Date</code> ангийн утгууд нь YYYY-MM-DD хэлбэрээр харагдана. Энэ бүлэгт бид огнооны утгын харагдах байдлыг хэрхэн өөрчлөх талаар харуулах болно.</p>
<p>Доор бид баганыг тэмдэгтийн утгаас <code>Date</code> анги руу хөрвүүлэх хоёр аргыг танилцуулж байна.</p>
<p><span style="color: darkgreen;"><strong><em>ЗӨВЛӨМЖ:</em></strong> Та баганын одоогийн ангийг <code>class(linelist$date_onset)</code> зэргээр <strong>base</strong> R-ын <code><a href="https://rdrr.io/r/base/class.html">class()</a></code>функц ашиглан шалгаж болно.</span></p>
<div id="base-r" class="section level3 unnumbered">
<h3>
<strong>base</strong> R<a class="anchor" aria-label="anchor" href="#base-r"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> нь объект эсвэл баганыг <code>Date</code> анги руу хөрвүүлдэг стандарт, <strong>base</strong> R функц юм (“D”-н том үсгийг анхаарна уу).</p>
<p><code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>-г ашиглахад дараахь зүйлийг шаарддаг:</p>
<ul>
<li><p>Хэрэв та огноог тоогоор оруулж буй бол эх огноог эсвэл огноог <em>тэмдэгт хэлбэрээр оруулж буй бол <strong>одоо байгаа</strong> форматыг зааж өгнө</em> (Excel огнооны хэсгийг үзнэ үү)</p></li>
<li><p>Хэрэв тэмдэгтийн баганад ашигласан бол бүх огнооны утгууд яг ижил форматтай байх ёстой (хэрэв тийм биш бол <strong>linelist</strong> багцын <code>guess_dates()</code> функцыг ашиглаж үзнэ үү)</p></li>
</ul>
<p><strong>Эхлээд</strong> баганыхаа ангийг <strong>base</strong> R-ын <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> функцээр шалгана уу. Хэрэв та датаныхаа ангийн талаар эргэлзэж байвал (жишээ нь “POSIXct” зэрэг анги гараад ирэх үед) эхлээд тухайн баганыг <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code> функц ашиглан тэмдэгт анги руу хөрвүүлээд дараа нь Date анги руу хөрвүүлэх нь хамгийн хялбар арга юм.</p>
<p><strong>Хоёрдугаарт</strong>, <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> функц дотор <code>format =</code> аргументыг ашиглан R-д тэмдэгтийн огнооны бүрэлдэхүүн хэсгүүдийн <em>одоогийн</em> форматыг хэлж болно - аль тэмдэгтүүд нь сар, өдөр, жилийг зааж буй болон, тэдгээрийг хэрхэн тусгаарласан зэргийг. Хэрэв таны утгууд аль хэдийн R-ын стандарт огнооны форматын аль нэгэнд байгаа бол (“YYYY-MM-DD” эсвэл “YYYY/MM/DD”) <code>format =</code> аргумент шаардлагагүй.</p>
<p>Форматлахын (<code>format =</code>) тулд доорх тусгай “strptime” товчлолуудыг ашиглан <em>одоогийн</em> огнооны форматыг илэрхийлэх тэмдэгтийн стрингийг (ишлэл дотор) оруулна. Жишээлбэл, хэрэв таны тэмдэгтийн огноо “24/04/1968” гэх мэт “DD/MM/YYYY” форматтай байгаа бол <code>format = "%d/%m/%Y"</code> ашиглан утгуудыг огноо руу хөрвүүлнэ. <strong>Форматыг ишлэл дотор оруулах шаардлагатай. Мөн ташуу зураас, зураасыг бүү мартаарай!</strong></p>
<div class="sourceCode" id="cb324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Date анги руу хөрвүүлэх</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">date_of_onset</span>, format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Ихэнх strptime товчиллуудыг доор жагсаав. Та <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code> командыг ажиллуулан бүрэн жагсаалтыг харах боломжтой.</p>
<p>%d = Сарын өдрийн дугаар (5, 17, 28 гэх мэт)<br>
%j = Жилийн өдрийн дугаар (Жулиан өдөр 001-366)<br>
%a = Товчилсон ажлын өдөр (Mon, Tue, Wed гэх мэт)<br>
%A = Бүтэн ажлын өдөр (Monday, Tuesday гэх мэт)</p>
<p>%w = Ажлын өдрийн дугаар (0-6, Ням гараг 0)<br>
%u = Ажлын өдрийн дугаар (1-7, Даваа гараг 1)<br>
%W = Долоо хоногийн дугаар (00-53, Даваа гараг долоо хоногийн эхлэл)<br>
%U = Долоо хоногийн дугаар (01-53, Ням гараг долоо хоногийн эхлэл)<br>
%m = Сарын дугаар (жишээ нь 01, 02, 03, 04)<br>
%b = Товчилсон сар (Jan, Feb гэх мэт)<br>
%B = Бүтэн сар (January, February гэх мэт)<br>
%y = 2-оронтой жил (жишээ нь 89)<br>
%Y = 4-оронтой жил (жишээ нь 1989)<br>
%h = цаг (24 цагийн цаг)<br>
%m = минут<br>
%s = секунд</p>
<p>%z = GMT-ээс офсет<br>
%Z = Цагийн бүс (тэмдэгт)</p>
<p><span style="color: darkgreen;"><strong><em>ЗӨВЛӨМЖ:</em></strong> <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>-ын <code>format =</code> аргумент нь таны хүсэж буй огнооны форматыг R-д хэлж буй биш бөгөөд харин командыг ажиллуулахын <em>өмнө</em> огнооны ямар хэсгүүд байгааг R-д зааж өгч буйг хэлж байгаа юм.</span></p>
<p><span style="color: darkgreen;"><strong><em>ЗӨВЛӨМЖ:</em></strong> <code>format =</code> аргументад таны оруулж буй огноонд байгаа <em>огнооны-хэсэг тусгаарлагчийг</em> (жишээ нь, /, -, эсвэл зай) ашиглахаа мартаж болохгүй.</span></p>
<p>Утгууд нь Date ангид орсны дараа R нь тэдгээрийг стандарт формат болох YYYY-MM-DD байдлаар харуулах болно.</p>
</div>
<div id="lubridate" class="section level3 unnumbered">
<h3>
<strong>lubridate</strong><a class="anchor" aria-label="anchor" href="#lubridate"><i class="fas fa-link"></i></a>
</h3>
<p><strong>lubridate</strong> багцыг ашигласнаар тэмдэгтийн объектуудыг огноо руу хөрвүүлэх нь илүү хялбар болно. Энэ багц нь огноо, цагтай ажиллах явцыг <strong>base</strong> R-аас илүү энгийн бөгөөд тогтвортой болгоход зориулагдсан <strong>tidyverse</strong>-ийн багц юм. Эдгээр шалтгааны улмаас <strong>lubridate</strong>-г ихэвчлэн огноо, цагийн хувьд алтан стандартын багц гэж үздэг бөгөөд тэдэнтэй ажиллах бүрт хэрэглэхийг зөвлөдөг.</p>
<p><strong>lubridate</strong> багц тэмдэгтийн объектуудыг огноо руу хөрвүүлэхэд зориулсан хэд хэдэн туслах функцээр хангадаг бөгөөд эдгээр нь <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>-д форматыг зааж өгөхөөс илүү хялбар бөгөөд ойлгомжтой байдаг. Эдгээр функцууд нь огнооны форматуудын товчлолын нэрээр нэрлэгдсэн бөгөөд тэдгээр нь тухайн огнооны форматтай тусгай холбоотой боловч төрөл бүрийн ялгагч, огнооны синоним (жишээ нь, 01 vs Jan vs January гэх мэт) ашиглах боломж олгодог.</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># lubridate суулгах/ачаалах</span>
<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></code></pre></div>
<p><code>ymd()</code> функц нь огнооны утгыг <strong>жил, сар, өдөр</strong> гэсэн дараалалтай болгон хувиргадаг.</p>
<div class="sourceCode" id="cb326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># огноог жил-сар-өдөр хэлбэрээр унших</span>
<span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-10-11"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<div class="sourceCode" id="cb328"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ymd</span><span class="op">(</span><span class="st">"20201011"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<p><code>mdy()</code> функц нь <strong>сар, өдөр, жил</strong> гэсэн дарааллаар өгсөн огнооны утгыг уян хатан байдлаар хөрвүүлдэг.</p>
<div class="sourceCode" id="cb330"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># огноог сар-өдөр-жил форматаар унших</span>
<span class="fu">mdy</span><span class="op">(</span><span class="st">"10/11/2020"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<div class="sourceCode" id="cb332"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mdy</span><span class="op">(</span><span class="st">"Oct 11 20"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<p><code>dmy()</code> функц нь <strong>өдөр, сар, жил</strong> гэсэн дарааллаар өгсөн огнооны утгыг уян хатан байдлаар хөрвүүлдэг.</p>
<div class="sourceCode" id="cb334"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># огноог өдөр-сар-жил форматаар унших</span>
<span class="fu">dmy</span><span class="op">(</span><span class="st">"11 10 2020"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<div class="sourceCode" id="cb336"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dmy</span><span class="op">(</span><span class="st">"11 October 2020"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<!-- The `as.character()` and `as.Date()` commands can optionally be combined as:   -->
<!-- ```{r eval=F} -->
<!-- linelist_cleaned$date_of_onset <- as.Date(as.character(linelist_cleaned$date_of_onset), format = "%d/%m/%Y") -->
<!-- ``` -->
<p>Хэрэв пайп ашиглаж байгаа бол тэмдэгтийн баганыг <strong>lubridate</strong> ашиглан огноо руу хөрвүүлэх нь дараах байдалтай байж болно:</p>
<div class="sourceCode" id="cb338"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Дууссаны дараа та баганын ангийг шалгахын тулд <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> ажиллуулж болно.</p>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Баганын ангийг шалгах</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span><span class="op">)</span>  </code></pre></div>
<p>Утгууд нь Date ангид орсны дараа R нь тэдгээрийг стандарт формат болох YYYY-MM-DD байдлаар харуулах болно.</p>
<p>Дээрх функцууд 4 оронтой жил бүхий форматтай хамгийн сайн ажилладаг гэдгийг анхаарна уу. 2 оронтой жил ашиглахад <strong>lubridate</strong> зууныг нь таах гэж оролддог тул төсөөлөөгүй үр дүнд хүргэж болзошгүй.</p>
<p>2 оронтой жилийг 4 оронтой жил (нэг зууны) болгон хөрвүүлэхийн тулд та эхлээд тэмдэгт анги руу хөрвүүлж, дараа нь <strong>stringr</strong> багцын <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> функц ашиглан одоо байгаа цифрүүдийн өмнө pre-fix нэмэн нэгтгэж болно (<span class="math display">\[Тэмдэгтүүд болон стрингүүд бүлгийг харна уу\]</span>). Үүний дараа нь огноо руу хөрвүүлнэ.</p>
<div class="sourceCode" id="cb340"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">two_digit_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"15"</span>, <span class="st">"15"</span>, <span class="st">"16"</span>, <span class="st">"17"</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"20{two_digit_years}"</span><span class="op">)</span></code></pre></div>
<pre><code>## 2015
## 2015
## 2016
## 2017</code></pre>
</div>
<div id="багануудыг-нэгтгэх" class="section level3 unnumbered">
<h3>Багануудыг нэгтгэх<a class="anchor" aria-label="anchor" href="#%D0%B1%D0%B0%D0%B3%D0%B0%D0%BD%D1%83%D1%83%D0%B4%D1%8B%D0%B3-%D0%BD%D1%8D%D0%B3%D1%82%D0%B3%D1%8D%D1%85"><i class="fas fa-link"></i></a>
</h3>
<p>Та олон тоон багануудыг нэг огнооны баганад нэгтгэхийн тулд <strong>lubridate</strong> багцын <code>make_date()</code> болон <code>make_datetime()</code> функцуудыг ашиглаж болно. Жишээлбэл, хэрэв таны <code>linelist</code> датафрэймд <code>onset_day</code>, <code>onset_month</code>, <code>onset_year</code> гэсэн тоон баганууд байгаа бол:</p>
<div class="sourceCode" id="cb342"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>onset_date <span class="op">=</span> <span class="fu">make_date</span><span class="op">(</span>year <span class="op">=</span> <span class="va">onset_year</span>, month <span class="op">=</span> <span class="va">onset_month</span>, day <span class="op">=</span> <span class="va">onset_day</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="excel-огноо" class="section level2" number="9.4">
<h2>
<span class="header-section-number">9.4</span> Excel огноо<a class="anchor" aria-label="anchor" href="#excel-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE"><i class="fas fa-link"></i></a>
</h2>
<p>Ихэнх программ хангамжууд огноог тоогоор хадгалдаг. R нь 1970 оны 1-р сарын 1-нийг эх өдөр болгон түүнээс хойш тоолон огноог хадгалдаг. Тиймээс хэрэв та <code>as.numeric(as.Date("1970-01-01))</code> гэж ажиллуулбал <code>0</code> гарах болно.</p>
<p>Microsoft Excel нь таны үйлдлийн системээс хамааран 1899 оны 12-р сарын 30 (Windows) эсвэл 1904 оны 1-р сарын 1-нээр (Mac) эх болгон огноог хадгалдаг. Дэлгэрэнгүй мэдээллийг энэхүү <a href="https://docs.microsoft.com/en-us/office/troubleshoot/excel/1900-and-1904-date-system">Microsoft-ын заавраас</a> үзнэ үү.</p>
<p>Excel-ийн огноо нь ихэвчлэн R руу орохдоо тэмдэгтийн оронд эдгээр тоон утгууд байдлаар импортлогддог. Хэрэв таны Excel-ээс импортолсон датасетийн огноог “41369” гэх мэт тоо эсвэл тэмдэгтээр харуулсан бол хөрвүүлэхийн тулд <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> (эсвэл <strong>lubridate</strong>-ийн <code>as_date()</code> функцийг) ашиглана уу. Гэхдээ <strong>дээрх шиг “формат” өгөхийн оронд <code>origin =</code> аргументэд Excel-ийн эх огноог өгнө</strong>.</p>
<p>Хэрэв Excel-ийн огноог R-д тэмдэгтийн хэлбэрээр хадгалсан бол энэ нь ажиллахгүй тул огнооны тоо нь Тоон анги эсэхийг шалгаарай!</p>
<p><span style="color: black;"><strong><em>ТЭМДЭГЛЭЛ:</em></strong> Та R-ийн анхдагч огнооны форматаар (“YYYY-MM-DD”) эх огноог оруулах шаардлагатай.</span></p>
<div class="sourceCode" id="cb343"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Excel-ийн тоон огноог хөрвүүлэхдээ Excel-ийн "эх огноо"-г өгөх жишээ</span>
<span class="va">data_cleaned</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># тоон ангитай байхыг бататгах</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">date_onset</span>, origin <span class="op">=</span> <span class="st">"1899-12-30"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Excel эх огноо ашиглан огноо руу хөрвүүлэх</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="эмх-цэгцгүй-огноо" class="section level2" number="9.5">
<h2>
<span class="header-section-number">9.5</span> Эмх цэгцгүй огноо<a class="anchor" aria-label="anchor" href="#%D1%8D%D0%BC%D1%85-%D1%86%D1%8D%D0%B3%D1%86%D0%B3%D2%AF%D0%B9-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE"><i class="fas fa-link"></i></a>
</h2>
<p><strong>linelist</strong> багцын <code>guess_dates()</code> функц нь олон янзын форматтай огноог агуулсан “замбараагүй” огнооны баганыг уншиж, огноог стандарт формат руу хөрвүүлэхийг оролддог. Та <a href="https://www.repidemicsconsortium.org/linelist/reference/guess_dates.html">онлайнаар <code>guess_dates()</code>-ын талаар илүү ихийг уншиж</a> болно. Хэрэв <code>guess_dates()</code> функцын R 4.0.2-д зориулсан хувилбар CRAN дээр байхгүй бол <code>pacman::p_load_gh("reconhub/linelist")</code> командаар суулгаж ашиглана уу.</p>
<p>Жишээлбэл, <code>guess_dates</code> нь “2018 оны 1-р сарын 03”, “07/03/1982”, “08/20/85” гэсэн тэмдэгтийн огнооны векторыг хараад дараах Огноо ангилал руу хөрвүүлнэ: <code>2018-01-03</code>, <code>1982-03-07</code>, <code>1985-08-20</code>.</p>
<div class="sourceCode" id="cb344"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">linelist</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/linelist/man/guess_dates.html">guess_dates</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"03 Jan 2018"</span>,
                        <span class="st">"07/03/1982"</span>,
                        <span class="st">"08/20/85"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2018-01-03" "1982-03-07" "1985-08-20"</code></pre>
<p>Таны <code>guess_dates()</code> функцэд оруулж болох нэмэлт аргументууд:</p>
<ul>
<li><p><code>error_tolerance</code> - Огноог тодорхойлох боломжгүй оруулгуудын эзлэх хувийн зөвшөөрөгдөх хэмжээ (өгөгдмөл нь 0.1 эсвэл 10%)</p></li>
<li><p><code>last_date</code> - сүүлчийн хүчинтэй огноо (өгөгдмөл нь одоогийн огноо)</p></li>
<li><p><code>first_date</code> - эхний хүчинтэй огноо. Өгөгдмөл нь <code>last_date</code>-ээс тавин жилийн өмнөх огноо.</p></li>
</ul>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co"># guess_dates-г date_onset багана дээр ашигласан жишээ</span></span>
<span id="cb346-2"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span>                 <span class="co"># linelist датасет</span></span>
<span id="cb346-3"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb346-4"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_onset =</span> linelist<span class="sc">::</span><span class="fu">guess_dates</span>(  <span class="co"># "linelist" багцын guess_dates() функц</span></span>
<span id="cb346-5"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-5" aria-hidden="true" tabindex="-1"></a>      date_onset,</span>
<span id="cb346-6"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">error_tolerance =</span> <span class="fl">0.1</span>,</span>
<span id="cb346-7"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">first_date =</span> <span class="st">"2016-01-01"</span></span>
<span id="cb346-8"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb346-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="date-time-ангитай-ажиллах" class="section level2" number="9.6">
<h2>
<span class="header-section-number">9.6</span> date-time ангитай ажиллах<a class="anchor" aria-label="anchor" href="#date-time-%D0%B0%D0%BD%D0%B3%D0%B8%D1%82%D0%B0%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85"><i class="fas fa-link"></i></a>
</h2>
<p>Өмнө дурьдсанчлан, R нь огноо болон цагийн мэдээллийг агуулсан <code>datetime</code> ангийг дэмждэг. Date ангийн нэгэн адил эдгээрийг ихэвчлэн тэмдэгтийн объектоос <code>datetime</code> объект руу хөрвүүлэх шаардлагатай болдог.</p>
<div id="цаг-агуулсан-огноог-хөрвүүлэх" class="section level3 unnumbered">
<h3>Цаг агуулсан огноог хөрвүүлэх<a class="anchor" aria-label="anchor" href="#%D1%86%D0%B0%D0%B3-%D0%B0%D0%B3%D1%83%D1%83%D0%BB%D1%81%D0%B0%D0%BD-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%B3-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85"><i class="fas fa-link"></i></a>
</h3>
<p>Стандарт <code>datetime</code> объект нь эхлээд огноогоор форматлагдсан бөгөөд дараа нь цагийн бүрэлдэхүүн хэсэг орно - жишээлбэл <em>2020 оны 1-р сарын 01, 16:30</em>. Огнооны нэгэн адил үүнийг форматлах олон арга байдаг бөгөөд мөн олон түвшний нарийвчлал (цаг, минут, секунд) байдаг.</p>
<p>Аз болоход эдгээр стрингүүдийг <code>datetime</code> объект руу хөрвүүлэх <strong>lubridate</strong>-ийн туслах функцууд бас байдаг. Эдгээр функцууд нь төгсгөлд нь <code>_h</code> (зөвхөн цаг), <code>_hm</code> (цаг, минут) эсвэл <code>_hms</code> (цаг, минут, секунд) нэмж хавсаргасан огнооны туслах функцүүдийн өргөтгөлүүд юм (жишээ нь, <code>dmy_hms()</code>). Эдгээрийг дараах байдлаар ашиглаж болно:</p>
<p>Зөвхөн цаг агуулсан огноо, цагийг datetime объект руу хөрвүүлэх</p>
<div class="sourceCode" id="cb347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ymd_h</span><span class="op">(</span><span class="st">"2020-01-01 16hrs"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-01 16:00:00 UTC"</code></pre>
<div class="sourceCode" id="cb349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ymd_h</span><span class="op">(</span><span class="st">"2020-01-01 4PM"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-01 04:00:00 UTC"</code></pre>
<p>Цаг, минут агуулсан огноо, цагийг datetime объект руу хөрвүүлэх</p>
<div class="sourceCode" id="cb351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dmy_hm</span><span class="op">(</span><span class="st">"01 January 2020 16:20"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-01 16:20:00 UTC"</code></pre>
<p>Цаг, минут, секунд агуулсан огноо, цагийг datetime объект руу хөрвүүлэх</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mdy_hms</span><span class="op">(</span><span class="st">"01 January 2020, 16:20:40"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-20 16:20:40 UTC"</code></pre>
<p>Та цагийн бүсийг өгч болно, гэхдээ үүнийг ашигладаггүй. Цагийн бүсийн талаар энэ бүлгийн сүүл хэсгийг үзнэ үү.</p>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mdy_hms</span><span class="op">(</span><span class="st">"01 January 2020, 16:20:40 PST"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-20 16:20:40 UTC"</code></pre>
<p>Датафрэймтэй ажиллахдаа <strong>stringr</strong> багцын <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> функц ба тохирох <strong>lubridate</strong> функцийг ашиглан цаг, огнооны баганыг нэгтгэн datetime багана үүсгэж болно. <strong>stringr</strong> багцын талаарх дэлгэрэнгүй мэдээллийг <span class="math display">\[Тэмдэгтүүд болон стрингүүд\]</span> хуудаснаас үзнэ үү.</p>
<p>Энэ жишээнд <code>linelist</code> датафрэйм нь “цаг:минут” формат бүхий баганатай байна. Үүнийг datetime болгон хөрвүүлэхийн тулд бид хэд хэдэн алхмуудыг дагана:</p>
<p>Тухайн баганын голч утга ашиглан хоосон утгыг дүүргэсэн эмнэлэгт хэвтэлтийн “цэвэр” цагийн багана үүсгэнэ. <strong>lubridate</strong> багц хоосон утгууд дээр ажиллахгүй тул бид үүнийг хийж буй юм. Үүнийг <code>date_hospitalisation</code> баганатай нэгтгээд <code>ymd_hm()</code> функцийг ашиглан хөрвүүлнэ.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="co"># багцууд</span></span>
<span id="cb357-2"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, lubridate, stringr)</span>
<span id="cb357-3"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-4"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-4" aria-hidden="true" tabindex="-1"></a><span class="co"># time_admission багана нь цаг:минут бүхий форматтай</span></span>
<span id="cb357-5"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb357-6"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb357-7"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># эмнэлэгт хэвтэлтийн цаг байхгүй тохиолдолд хэвтэлтийн голч хугацааг онооно</span></span>
<span id="cb357-8"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb357-9"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_admission_clean =</span> <span class="fu">ifelse</span>(</span>
<span id="cb357-10"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(time_admission),         <span class="co"># цаг хоосон байгаа үед</span></span>
<span id="cb357-11"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">median</span>(time_admission),        <span class="co"># голч утгыг онооно</span></span>
<span id="cb357-12"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-12" aria-hidden="true" tabindex="-1"></a>      time_admission                 <span class="co"># хоосон биш байвал хэвээр үлдээнэ</span></span>
<span id="cb357-13"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb357-14"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb357-15"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># str_glue() ашиглан огноо, цагийн багануудыг нэгтгэж нэг тэмдэгт багана үүсгэнэ </span></span>
<span id="cb357-16"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># дараа нь ymd_hm()-г ашиглан datetime руу хөрвүүлнэ</span></span>
<span id="cb357-17"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb357-18"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_time_of_admission =</span> <span class="fu">str_glue</span>(<span class="st">"{date_hospitalisation} {time_admission_clean}"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb357-19"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ymd_hm</span>()</span>
<span id="cb357-20"><a href="%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C.html#cb357-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="зөвхөн-цагийг-хөрвүүлэх" class="section level3 unnumbered">
<h3>Зөвхөн цагийг хөрвүүлэх<a class="anchor" aria-label="anchor" href="#%D0%B7%D3%A9%D0%B2%D1%85%D3%A9%D0%BD-%D1%86%D0%B0%D0%B3%D0%B8%D0%B9%D0%B3-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85"><i class="fas fa-link"></i></a>
</h3>
<p>Хэрэв таны датанд зөвхөн хугацаа (цаг, минут) тэмдэгт байдлаар агуулагдаж байвал та <strong>base</strong> R-ын <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code>-г ашиглан тэдгээрийг цаг болгон хувиргаж, өөрчлөх боломжтой. Жишээлбэл, эдгээр хоёр цагийн зөрүүг олж авахын тулд:</p>
<div class="sourceCode" id="cb358"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># тэмдэгт ангийн цагууд</span>
<span class="va">time1</span> <span class="op">&lt;-</span> <span class="st">"13:45"</span> 
<span class="va">time2</span> <span class="op">&lt;-</span> <span class="st">"15:20"</span>

<span class="co"># Цагуудыг datetime анги руу хөрвүүлнэ</span>
<span class="va">time1_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span><span class="op">(</span><span class="va">time1</span>, format <span class="op">=</span> <span class="st">"%H:%M"</span><span class="op">)</span>
<span class="va">time2_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span><span class="op">(</span><span class="va">time2</span>, format <span class="op">=</span> <span class="st">"%H:%M"</span><span class="op">)</span>

<span class="co"># Ялгаа нь "difftime" анги бөгөөд энд тоон цаг руу хөрвүүлж байна </span>
<span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">time2_clean</span> <span class="op">-</span> <span class="va">time1_clean</span><span class="op">)</span>   <span class="co"># цагийн зөрүү</span></code></pre></div>
<pre><code>## [1] 1.583333</code></pre>
<p>Гэхдээ огнооны утгыг заагаагүй бол огноог өнөөдөр гэж тооцдог гэдгийг анхаарна уу. <strong>stringr</strong> багцыг ашиглан стринг огноо болон стринг цагийг хэрхэн нэгтгэх талаар дээрх хэсгээс харна уу. <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code>-ийн талаар <a href="https://rdrr.io/r/base/strptime.html">эндээс</a> уншина уу.</p>
<p>Нэг оронтой тоог хоёр оронтой тоонд хөрвүүлэхийн тулд (жишээ нь, 2 оронтой болохын тулд цаг эсвэл минутын урд тэг оруулж дэвсэх) <a href="%D0%BA%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80-%D0%B1%D0%B0-%D1%81%D1%82%D1%80%D0%B8%D0%BD%D0%B3%D1%81.html#str_pad">“Тэмдэгтүүд болон стрингүүд” хуудасны “Дэвсэх урт” хэсгийг</a> үзнэ үү.</p>
</div>
<div id="цагийг-гаргаж-авах" class="section level3 unnumbered">
<h3>Цагийг гаргаж авах<a class="anchor" aria-label="anchor" href="#%D1%86%D0%B0%D0%B3%D0%B8%D0%B9%D0%B3-%D0%B3%D0%B0%D1%80%D0%B3%D0%B0%D0%B6-%D0%B0%D0%B2%D0%B0%D1%85"><i class="fas fa-link"></i></a>
</h3>
<p>Та <strong>lubridate</strong> багцын <code>hour()</code>, <code>minute()</code>, <code>second()</code> функцүүдийг ашиглан цагийн элементүүдийг гаргаж авч болно.</p>
<p>Цагийг гаргаж аваад өдрийн нэг хэсгээр нь ангилах жишээ энд байна. Бид “HH:MM” форматтай Тэмдэгт ангийн <code>time_admission</code> баганаас эхэлнэ. Нэгдүгээрт, тэмдэгтүүдийг datetime анги руу хөрвүүлэхийн тулд дээр дурдсанчлан <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code> ашигладаг. Дараа нь цагийг <code>hour()</code> функцээр гаргаж авахад 0-24 хүртэлх тооны аль нэг гарч ирнэ. Эцэст нь, эмнэлэгт хэвтсэн цагийг логик мэдэгдлүүд ашиглан <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> функцын тусламжтайгаар Өглөө/Үдээс/Орой/Шөнө гэж ангилсан <code>time_period</code> хэмээх шинэ багана үүсгэж байна.</p>
<div class="sourceCode" id="cb360"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hour_admit <span class="op">=</span> <span class="fu">hour</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span><span class="op">(</span><span class="va">time_admission</span>, format <span class="op">=</span> <span class="st">"%H:%M"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>time_period <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="va">hour_admit</span> <span class="op">&gt;</span> <span class="fl">06</span> <span class="op">&amp;</span> <span class="va">hour_admit</span> <span class="op">&lt;</span> <span class="fl">12</span> <span class="op">~</span> <span class="st">"Morning"</span>,
    <span class="va">hour_admit</span> <span class="op">&gt;=</span> <span class="fl">12</span> <span class="op">&amp;</span> <span class="va">hour_admit</span> <span class="op">&lt;</span> <span class="fl">17</span> <span class="op">~</span> <span class="st">"Afternoon"</span>,
    <span class="va">hour_admit</span> <span class="op">&gt;=</span> <span class="fl">17</span> <span class="op">&amp;</span> <span class="va">hour_admit</span> <span class="op">&lt;</span> <span class="fl">21</span> <span class="op">~</span> <span class="st">"Evening"</span>,
    <span class="va">hour_admit</span> <span class="op">&gt;=</span><span class="fl">21</span> <span class="op">|</span> <span class="va">hour_admit</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"Night"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> функцын талаар илүү ихийг мэдэхийг хүсвэл <span class="math display">\[Дата цэвэрлэх болон үндсэн функцууд\]</span> хуудаснаас үзнэ үү.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="огноотой-ажиллах" class="section level2" number="9.7">
<h2>
<span class="header-section-number">9.7</span> Огноотой ажиллах<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85"><i class="fas fa-link"></i></a>
</h2>
<p><strong>lubridate</strong> багцыг <strong>date/datetime</strong> <strong>багануудын хэсгийг гаргаж авах, огноон дээр арифметик хийх, огнооны интервалыг тооцоолох</strong> зэрэг олон төрлийн функцэд ашиглаж болно.</p>
<p>Энд бид жишээнүүдэд ашиглах огноог тодорхойллоо:</p>
<div class="sourceCode" id="cb361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Date ангийн объект үүсгэх</span>
<span class="va">example_date</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-03-01"</span><span class="op">)</span></code></pre></div>
<div id="огнооны-бүрэлдэхүүн-хэсгүүдийг-гаргаж-авах" class="section level3 unnumbered">
<h3>Огнооны бүрэлдэхүүн хэсгүүдийг гаргаж авах<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%BD%D1%8B-%D0%B1%D2%AF%D1%80%D1%8D%D0%BB%D0%B4%D1%8D%D1%85%D2%AF%D2%AF%D0%BD-%D1%85%D1%8D%D1%81%D0%B3%D2%AF%D2%AF%D0%B4%D0%B8%D0%B9%D0%B3-%D0%B3%D0%B0%D1%80%D0%B3%D0%B0%D0%B6-%D0%B0%D0%B2%D0%B0%D1%85"><i class="fas fa-link"></i></a>
</h3>
<p>Та сар, өдөр, ажлын өдөр гэх мэт нийтлэг талуудыг гаргаж авч болно:</p>
<div class="sourceCode" id="cb362"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">month</span><span class="op">(</span><span class="va">example_date</span><span class="op">)</span>  <span class="co"># сарын дугаар</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb364"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">day</span><span class="op">(</span><span class="va">example_date</span><span class="op">)</span>    <span class="co"># сарын өдөр (дугаар)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb366"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">wday</span><span class="op">(</span><span class="va">example_date</span><span class="op">)</span>   <span class="co"># долоо хоногийн өдрийн дугаар (1-7)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Та мөн <code>datetime</code> объект эсвэл баганаас цагийн бүрэлдэхүүн хэсгүүдийг гаргаж авах боломжтой. Хэрэв та эмнэлэгт хэвтсэн цагийн тархалтыг харахыг хүсвэл энэ нь хэрэг болно.</p>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">example_datetime</span> <span class="op">&lt;-</span> <span class="fu">ymd_hm</span><span class="op">(</span><span class="st">"2020-03-01 14:45"</span><span class="op">)</span>

<span class="fu">hour</span><span class="op">(</span><span class="va">example_datetime</span><span class="op">)</span>     <span class="co"># цаг гаргаж авах</span>
<span class="fu">minute</span><span class="op">(</span><span class="va">example_datetime</span><span class="op">)</span>   <span class="co"># минут гаргаж авах</span>
<span class="fu">second</span><span class="op">(</span><span class="va">example_datetime</span><span class="op">)</span>   <span class="co"># секунд гаргаж авах</span></code></pre></div>
<p>Долоо хоногуудыг харах хэд хэдэн сонголт байдаг. Доорх Эпидемиологийн долоо хоногийн хэсгийг үзнэ үү.</p>
<p>Хэрэв та огноог тодорхой байдлаар <em>харуулахыг</em> хүсч байгаа бол (жишээ нь “2020 оны 1-р сар” эсвэл “3-р сары 20-ны Пүрэв гараг” эсвэл “1977 оны 20-р долоо хоног”) үүнийг Огноо харуулах хэсэгт тайлбарласны дагуу илүү уян хатан байдлаар хийж болно.</p>
</div>
<div id="огнооны-математик" class="section level3 unnumbered">
<h3>Огнооны математик<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%BD%D1%8B-%D0%BC%D0%B0%D1%82%D0%B5%D0%BC%D0%B0%D1%82%D0%B8%D0%BA"><i class="fas fa-link"></i></a>
</h3>
<p>Та <strong>lubridate</strong> багцаас тус тусын функцийг ашиглан тодорхой тооны өдөр, долоо хоног нэмж болно.</p>
<div class="sourceCode" id="cb369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># энэхүү огноо руу 3 өдөр нэмэх</span>
<span class="va">example_date</span> <span class="op">+</span> <span class="fu">days</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-03-04"</code></pre>
<div class="sourceCode" id="cb371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># энэ огноо дээр 7 долоо хоног нэмж, хоёр өдрийг хас</span>
<span class="va">example_date</span> <span class="op">+</span> <span class="fu">weeks</span><span class="op">(</span><span class="fl">7</span><span class="op">)</span> <span class="op">-</span> <span class="fu">days</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-04-17"</code></pre>
</div>
<div id="огнооны-интервал" class="section level3 unnumbered">
<h3>Огнооны интервал<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%BD%D1%8B-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB"><i class="fas fa-link"></i></a>
</h3>
<p>Огноо хоорондын зөрүүг дараах байдлаар тооцоолж болно:</p>
<ol style="list-style-type: decimal">
<li><p>Хоёр огноо нь хоёулаа <code>date</code> анги мөн эсэхийг шалгана</p></li>
<li><p>Хоёр огнооны хоорондох “difftime” зөрүүг гаргахын тулд хасаж болно</p></li>
<li><p>Шаардлагатай бол дараагийн математик тооцооллыг хийхийн тулд гарсан үр дүнг тоон анги руу хөрвүүлнэ</p></li>
</ol>
<p>Доор хоёр огнооны хоорондох интервалыг тооцон харуулж байна. Огноо ангийн утгууд дээр “хасах” тэмдгийг ашиглан интервалыг олох боломжтой. Гэсэн хэдий ч буцаасан утгын анги нь доор үзүүлсэн шиг “difftime” бөгөөд тоон хэлбэрт хөрвүүлэх ёстой гэдгийг анхаарна уу.</p>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Жишээ огнооноос 2020 оны 2-р сарын 20-ны хоорондох зайг ол </span>
<span class="va">output</span> <span class="op">&lt;-</span> <span class="va">example_date</span> <span class="op">-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-02-20"</span><span class="op">)</span>
<span class="va">output</span>    <span class="co"># хэвлэ</span></code></pre></div>
<pre><code>## Time difference of 10 days</code></pre>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "difftime"</code></pre>
<p>“Dfftime” дээр дараагийн үйлдлүүдийг хийхийн тулд үүнийг <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> ашиглан тоон хэлбэрт хөрвүүлнэ.</p>
<p>Дата ажиллах үед энэ бүгдийг нэгтгэж болно - жишээлбэл:</p>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">lubridate</span>, <span class="va">tidyverse</span><span class="op">)</span>   <span class="co"># багцууд ачааллах</span>

<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># dmy форматыг зааж өгснөөр шинж тэмдэг эхэлсэн огноог тэмдэгтээс огноо болгон хувиргана </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu">dmy</span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span>,
         date_hospitalisation <span class="op">=</span> <span class="fu">dmy</span><span class="op">(</span><span class="va">date_hospitalisation</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  
  <span class="co"># Гуравдугаар сард шинж тэмдэг нь эхлээгүй бүх тохиолдлыг шүүж хасна</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu">month</span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    
  <span class="co"># шинж тэмдэг эхэлсэн ба эмнэлэгт хэвтсэн өдрүүдийн хоорондох зөрүүг ол</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_onset_to_hosp <span class="op">=</span> <span class="va">date_hospitalisation</span> <span class="op">-</span> <span class="va">date_of_onset</span><span class="op">)</span></code></pre></div>
<p>Датафрэймтэй ажиллах үед тодорхой мөр дээр дээрх огнооны аль нэг нь байхгүй бол тухайн мөрийн хувьд энэхүү үйл ажиллагаа амжилтгүй болно. Үүний үр дүнд тоон утгын оронд <code>NA</code> гарч ирнэ. Тиймээс энэ баганыг тооцоололд ашиглахдаа <code>na.rm =</code> аргументыг <code>TRUE</code> гэж тохируулахаа мартуузай. Жишээлбэл:</p>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Дата байгаа бүх тохиолдлын хувьд эмнэлэгт хэвтэх хоногийн голч утгыг тооцоол</span>
<span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">linelist_delay</span><span class="op">$</span><span class="va">days_onset_to_hosp</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="огноо-харуулах" class="section level2" number="9.8">
<h2>
<span class="header-section-number">9.8</span> Огноо харуулах<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE-%D1%85%D0%B0%D1%80%D1%83%D1%83%D0%BB%D0%B0%D1%85"><i class="fas fa-link"></i></a>
</h2>
<p>Огноог зөв ангид хөрвүүлсний дараа та тэдгээрийг зарим тохиолдолд өөрөөр жишээлбэл “2018-01-05”-ны оронд “1-р сарын 05-ны Даваа” гэж харуулахыг хүсдэг. Та мөн харагдаж буй огнооны элементүүдээр мөрүүдийг бүлэглэхийн тулд харагдах байдлыг өөрчлөх хэрэгтэй болж магадгүй - жишээлбэл сар жилээр бүлэглэх.</p>
<div id="format" class="section level3 unnumbered">
<h3>
<code>format()</code><a class="anchor" aria-label="anchor" href="#format"><i class="fas fa-link"></i></a>
</h3>
<p><strong>base</strong> R-ын <code><a href="https://rdrr.io/r/base/format.html">format()</a></code> функцээр огнооны харагдах байдлыг тохируулж болно. Энэ функц нь “%” strptime товчлол (<code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>-д ашигласантай ижил синтакс) бүхий хүсэж буй форматыг зааж өгсөн тэмдэгтийн стрингийг (ишлэлд) хүлээн авдаг. Хамгийн түгээмэл товчлолуудыг доор харуулав.</p>
<p>Тэмдэглэл: <code><a href="https://rdrr.io/r/base/format.html">format()</a></code>-ыг ашигласнаар утгуудыг Тэмдэгт анги руу хөрвүүлэх тул үүнийг ерөнхийдөө дүн шинжилгээний төгсгөлд эсвэл зөвхөн харуулах зорилгоор ашигладаг! Та <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code>-г ажиллуулснаар бүрэн жагсаалтыг харах боломжтой.</p>
<p>%d = Сарын өдрийн дугаар (5, 17, 28 гэх мэт)<br>
%j = Жилийн өдрийн дугаар (Жулиан өдөр 001-366)<br>
%a = Товчилсон ажлын өдөр (Mon, Tue, Wed гэх мэт)<br>
%A = Бүтэн ажлын өдөр (Monday, Tuesday гэх мэт)</p>
<p>%w = Ажлын өдрийн дугаар (0-6, Ням гараг 0)<br>
%u = Ажлын өдрийн дугаар (1-7, Даваа гараг 1)<br>
%W = Долоо хоногийн дугаар (00-53, Даваа гараг долоо хоногийн эхлэл)<br>
%U = Долоо хоногийн дугаар (01-53, Ням гараг долоо хоногийн эхлэл)<br>
%m = Сарын дугаар (жишээ нь 01, 02, 03, 04)<br>
%b = Товчилсон сар (Jan, Feb гэх мэт)<br>
%B = Бүтэн сар (January, February гэх мэт)<br>
%y = 2-оронтой жил (жишээ нь 89)<br>
%Y = 4-оронтой жил (жишээ нь 1989)<br>
%h = цаг (24 цагийн цаг)<br>
%m = минут<br>
%s = секунд</p>
<p>%z = GMT-ээс офсет<br>
%Z = Цагийн бүс (тэмдэгт)</p>
<p>Өнөөдрийн огноог форматлах жишээ:</p>
<div class="sourceCode" id="cb379"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># форматтай өнөөдрийн огноо</span>
<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%d %B %Y"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "05 Нэгд?гээр сар 2022"</code></pre>
<div class="sourceCode" id="cb381"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># огноо, цагийг бүрэн авах хялбар арга (өгөгдмөл формат)</span>
<span class="fu"><a href="https://rdrr.io/r/base/date.html">date</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Wed Jan 05 18:16:53 2022"</code></pre>
<div class="sourceCode" id="cb383"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># str_glue() функцийг ашиглан форматласан нэгтгэсэн огноо, цаг, цагийн бүс</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{format(Sys.Date(), format = '%A, %B %d %Y, %z  %Z, ')}{format(Sys.time(), format = '%H:%M:%S')}"</span><span class="op">)</span></code></pre></div>
<pre><code>## лхагва, Нэгд?гээр сар 05 2022, +0000  UTC, 18:16:53</code></pre>
<div class="sourceCode" id="cb385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Долоо хоногуудыг харуулах форматыг ашиглах</span>
<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%Y Week %W"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2022 Week 01"</code></pre>
<p>Хэрэв <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> ашиглаж байгаа бол давхар ишлэл ” дотор зөвхөн ганц ишлэл ’ (дээрх шиг) ашиглах ёстойг анхаарна уу.</p>
</div>
<div id="сар-жил" class="section level3 unnumbered">
<h3>Сар-жил<a class="anchor" aria-label="anchor" href="#%D1%81%D0%B0%D1%80-%D0%B6%D0%B8%D0%BB"><i class="fas fa-link"></i></a>
</h3>
<p>Огноо баганыг Сар-жил формат руу хөрвүүлэхийн тулд <strong>zoo</strong> багцаас <code>as.yearmon()</code> функцийг ашиглахыг зөвлөж байна. Энэ нь огноог “yearmon” анги руу хувиргаж, зохих дарааллыг хадгална. Үүнтэй харьцуулахад, <code>format(column, "%Y %B")</code> ашиглавал Тэмдэгт анги руу хөрвүүлэх ба утгуудыг цагаан толгойн дарааллаар (буруу) дараалуулна.</p>
<p>Доор, <code>date_onset</code> баганаас <code>as.yearmon()</code> функцийг ашиглан <code>yearmonth</code> шинэ багана үүсгэсэн байна. Үр дүнгийн утгуудын анхдагч (зөв) дарааллыг хүснэгтэд үзүүлэв.</p>
<div class="sourceCode" id="cb387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># шинэ багана үүсгэх</span>
<span class="va">test_zoo</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>yearmonth <span class="op">=</span> <span class="fu">zoo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zoo/man/yearmon.html">as.yearmon</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span>

<span class="co"># хүснэгт хэвлэх</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">test_zoo</span><span class="op">$</span><span class="va">yearmon</span><span class="op">)</span></code></pre></div>
<pre><code>## 
##  4-р сар 2014  5-р сар 2014  6-р сар 2014  7-р сар 2014  8-р сар 2014 
##             7            64           100           226           528 
##  9-р сар 2014 10-р сар 2014 11-р сар 2014 12-р сар 2014  1-р сар 2015 
##          1070          1112           763           562           431 
##  2-р сар 2015  3-р сар 2015  4-р сар 2015 
##           306           277           186</code></pre>
<p>Үүнтэй харьцуулахад, та зөвхөн <code><a href="https://rdrr.io/r/base/format.html">format()</a></code>-ыг ашигласнаар хэрхэн хүссэн харагдах байдлын форматтай болж буй боловч зөв дараалалгүй болохыг харж болно.</p>
<div class="sourceCode" id="cb389"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># шинэ багана үүсгэх</span>
<span class="va">test_format</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>yearmonth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">date_onset</span>, <span class="st">"%b %Y"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># хүснэгт хэвлэх</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">test_format</span><span class="op">$</span><span class="va">yearmon</span><span class="op">)</span></code></pre></div>
<pre><code>## 
##  1-р сар 2015 10-р сар 2014 11-р сар 2014 12-р сар 2014  2-р сар 2015 
##           431          1112           763           562           306 
##  3-р сар 2015  4-р сар 2014  4-р сар 2015  5-р сар 2014  6-р сар 2014 
##           277             7           186            64           100 
##  7-р сар 2014  8-р сар 2014  9-р сар 2014 
##           226           528          1070</code></pre>
<p>Тэмдэглэл: Хэрэв та <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> дээр ажиллаж байгаа бөгөөд зөвхөн огноог хэрхэн харуулахыг тохируулахыг хүсвэл <code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code> функцийн <code>date_labels =</code> аргументад strptime формат оруулахад хангалттай. Жишээ нь та <code>"%b %Y"</code> эсвэл <code>"%Y %b"</code> ашиглаж болно. <span class="math display">\[ggplot зөвлөмж\]</span> хуудсыг үзнэ үү.</p>
<p><strong>zoo</strong> нь мөн <code>as.yearqtr()</code> функцийг санал болгодог бөгөөд та <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> ашиглахдаа <code>scale_x_yearmon()</code>-г ашиглаж болно.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="dates_epi_wks" class="section level2" number="9.9">
<h2>
<span class="header-section-number">9.9</span> Эпидемиологийн долоо хоног<a class="anchor" aria-label="anchor" href="#dates_epi_wks"><i class="fas fa-link"></i></a>
</h2>
<div id="lubridate-1" class="section level3 unnumbered">
<h3>
<strong>lubridate</strong><a class="anchor" aria-label="anchor" href="#lubridate-1"><i class="fas fa-link"></i></a>
</h3>
<p>Датаг огноогоор нь бүлэглэх илүү өргөн хүрээний жишээнүүдийг <span class="math display">\[Дата бүлэглэх\]</span> хуудаснаас үзнэ үү. Доор бид өгөгдлийг долоо хоногоор бүлэглэх талаар товч тайлбарлав.</p>
<p>Бид ерөнхийдөө <code>lubridate</code>-ын <code>floor_date()</code> функцийг <code>unit = "week"</code> аргументын хамт ашиглахыг зөвлөж байна. Энэ нь <code>week_start =</code> аргументаар тодорхойлогдсоны дагуу огноог долоо хоногийн “эхлэл” хүртэл доош нь бүхэлддэг. Долоо хоногийн өгөгдмөл эхлэл нь 1 (Даваа гаригт) гэхдээ та долоо хоногийн аль ч өдрийг эхлэл гэж зааж өгч болно (жишээ нь, Ням гарагт 7). <code>floor_date()</code> нь олон талтай бөгөөд <code>unit =</code> аргументыг “second”, “minute”, “hour”, “day”, “month” эсвэл “year” болгон тохируулснаар төрөл бүрийн хугацааны нэгж рүү бүхэлдэхэд ашиглаж болно.</p>
<p>Буцаасан утга нь Date анги бүхий долоо хоногийн эхлэх огноо юм. Date анги нь <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>-д амархан танигдаж, зөв ​​эрэмбэлэгддэг тул дата зураглахад тун хэрэгтэй байдаг.</p>
<p>Хэрэв та зөвхөн график дотор огноог долоо хоногоор <em>харуулахыг</em> сонирхож байгаа бол энэ хуудасны Огноо харуулах хэсгийг үзнэ үү. Жишээлбэл, тархварзүйн муруйг зурахдаа та хүссэн strptime “%” товчлолоо өгснөөр огнооны харагдах байдлыг форматлаж болно. Жишээ нь, “%Y-%W” эсвэл “%Y-%U”-г ашиглан жил, долоо хоногийн дугаарыг буцаана (Даваа эсвэл Ням гарагийн долоо хоногийн эхлэлүүд тус бүрт).</p>
</div>
<div id="долоо-хоног-тутмын-тоо" class="section level3 unnumbered">
<h3>Долоо хоног тутмын тоо<a class="anchor" aria-label="anchor" href="#%D0%B4%D0%BE%D0%BB%D0%BE%D0%BE-%D1%85%D0%BE%D0%BD%D0%BE%D0%B3-%D1%82%D1%83%D1%82%D0%BC%D1%8B%D0%BD-%D1%82%D0%BE%D0%BE"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> болон <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> ашиглан дата бүлэглэх талаар дэлгэрэнгүй тайлбарыг <span class="math display">\[Дата бүлэглэх\]</span> хуудаснаас үзнэ үү. Товч жишээг доор харуулав.</p>
<ol style="list-style-type: decimal">
<li><p>Шинэ “week” баганыг <code>floor_date()</code>-ыг <code>unit = "week"</code> аргументын хамт <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> ашиглан үүсгэнэ.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> функцээр долоо хоног тутмын мөрийн (тохиолдлын) тоог авна; хоосон огноотой тохиолдлуудыг шүүн хасна</p></li>
<li><p><em>Бүх</em> долоо хоногууд мөр/тохиолдолгүй байсан ч гэсэн датанд гарч ирэхийг баталгаажуулахын тулд <strong>tidyr</strong> багцын <code><a href="https://tidyr.tidyverse.org/reference/complete.html">complete()</a></code> функцийг ашиглан дуусгана. Анхдагч байдлаар аливаа “шинэ” мөрүүдийн тоон утгууд нь <code>NA</code> байна, гэхдээ та тэдгээрийг нэрлэсэн лист хүлээж авдаг <code>fill =</code> аргументын тусламжтайгаар 0 болгож болно (доор, <code>n</code> нь тооны баганын нэр).</p></li>
</ol>
<div class="sourceCode" id="cb391"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Долоо хоног тутмын тохиолдлын тооны нэгдсэн датасет үүсгэх</span>
<span class="va">weekly_counts</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># хоосон шинж тэмдэг эхэлсэн огноо бүхий тохиолдлуудыг хасах</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>weekly_cases <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span>   <span class="co">#  шинж тэмдэг эхэлсэн долоо хоног хэмээх шинэ багана үүсгэх</span>
    <span class="va">date_onset</span>,
    unit <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>            
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">weekly_cases</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>           <span class="co"># датаг долоо хоногоор бүлэглэж, бүлэг бүрт мөр тоолох ('n' багана үүсгэх) </span>
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html">complete</a></span><span class="op">(</span>                  <span class="co"># тохиолдол бүртгэгдээгүй байсан ч гэсэн бүх долоо хоногууд байгааг хангах</span>
    weekly_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>          <span class="co"># "weekly_cases" баганыг бүрэн дараалал болгон дахин тодорхойлох</span>
      from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">weekly_cases</span><span class="op">)</span>,       <span class="co"># хамгийн бага огнооноос</span>
      to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">weekly_cases</span><span class="op">)</span>,         <span class="co"># хамгийн дээд огноо хүртэл</span>
      by <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span>,                   <span class="co"># 7 хоногоор</span>
    fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>             <span class="co"># n тооны баганад NA-г 0-ээр бөглөх</span></code></pre></div>
<p>Энд шинээр үүссэн датафрэймийн эхний мөрүүд байна:</p>
<div id="htmlwidget-2537b5849086edd63a2e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2537b5849086edd63a2e">{"x":{"filter":"none","vertical":false,"data":[["2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17"],[1,1,4,4,12,14,14,21,21,18,30,23,31,35,55,58,80,86,114,122]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>weekly_cases<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="epiweek-хувилбарууд" class="section level3 unnumbered">
<h3>Epiweek хувилбарууд<a class="anchor" aria-label="anchor" href="#epiweek-%D1%85%D1%83%D0%B2%D0%B8%D0%BB%D0%B1%D0%B0%D1%80%D1%83%D1%83%D0%B4"><i class="fas fa-link"></i></a>
</h3>
<p><strong>lubridate</strong> нь мөн <code>week()</code>, <code>epiweek()</code>, <code>isoweek()</code> гэсэн тус бүр нь бага зэрэг өөр эхлэх огноо болон бусад нюансууд бүхий функцуудтай болно. Гэхдээ ихэнх тохиолдолд <code>floor_date()</code> нь танд хэрэг болох ганц функц байдаг. Эдгээр функцүүдийн дэлгэрэнгүйг консол руу <code>?week</code> гэж оруулснаар эсвэл <a href="https://www.rdocumentation.org/packages/lubridate/versions/1.7.4/topics/week">эндээс</a> баримт бичгийг уншина уу.</p>
<p>Та эпидемиологийн долоо хоногийг тогтоохын тулд <strong>aweek</strong> багцыг мөн ашиглаж болно. Та энэ талаар <a href="https://www.repidemicsconsortium.org/aweek/">RECON вэбсайтаас</a> илүү ихийг уншиж болно. Энэ нь <code>date2week()</code> болон <code>week2date()</code> функцтэй бөгөөд долоо хоногийн эхлэх өдрийг <code>week_start = "Monday"</code> аргументээр тохируулах боломжтой. Хэрэв та “долоо хоног” маягийн гаралтыг (жишээ нь “2020-W12”) авахыг хүсвэл энэ багц хамгийн хялбар юм. <strong>aweek</strong> багцын өөр нэг давуу тал нь <code>date2week()</code>-г огнооны баганад хэрэглэх үед буцаасан багана (долоо хоногийн формат) автоматаар Фактор анги болон тухайн хугацааны бүх долоо хоногийн түвшнийг багтаадаг (ингэснээр дээр үзүүлсэн <code><a href="https://tidyr.tidyverse.org/reference/complete.html">complete()</a></code> функцын нэмэлт алхамаас зайлсхийдэг). Гэсэн хэдий ч <strong>aweek</strong> багцад огноог сар, жил гэх мэт бусад цагийн нэгж рүү бүхэлдэх функц байхгүй.</p>
<p>“Долоо хоног” форматыг (“2020 W12”) харуулахад тохиромжтой цаг хугацааны цувралын өөр нэг хувилбар бол <span class="math display">\[Цагийн цуваа ба дэгдэлт илрүүлэх\]</span> хуудсанд үзүүлсэн шиг <strong>tsibble</strong> багцын <code>yearweek()</code> функц юм.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="огнооцагийн-бүсийг-хөрвүүлэх" class="section level2" number="9.10">
<h2>
<span class="header-section-number">9.10</span> Огноо/цагийн бүсийг хөрвүүлэх<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%86%D0%B0%D0%B3%D0%B8%D0%B9%D0%BD-%D0%B1%D2%AF%D1%81%D0%B8%D0%B9%D0%B3-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85"><i class="fas fa-link"></i></a>
</h2>
<p>Өөр өөр цагийн бүсийн дата байгаа үед энэ датаг нэгдсэн цагийн бүсэд оруулан стандартчилах нь ихэвчлэн чухал байдаг. Ихэнх тохиолдолд датаны цагийн бүсийн бүрэлдэхүүн хэсгийг гараар кодлох шаардлагатай байдаг тул энэ нь нэмэлт бэрхшээл учруулдаг.</p>
<p>R-д <em>datetime</em> объект бүр цагийн бүсийн бүрэлдэхүүнтэй байна. Бүх огнооны объектууд нь өгөгдмөл байдлаар ашиглаж буй компьютерийн орон нутгийн цагийн бүсийг агуулдаг бөгөөд цагийн бүсүүд ихэвчлэн зуны цагаар өөрчлөгддөг тул энэ нь ерөнхийдөө нэрлэсэн цагийн бүсээс илүү <em>тухайн байршилд</em> зориулагдсан байдаг. Огнооны баганыг харуулсан үйл явдлыг тодорхой цаг хугацаанд хамааруулах боломжгүй тул огнооны цагийн бүрэлдэхүүн хэсэггүйгээр цагийн бүсийг үнэн зөвөөр нөхөх боломжгүй бөгөөд тийм учир цагаар хэмжигдэх хугацааны шилжилтийг үндэслэлтэй тооцож чаддаггүй.</p>
<p>Цагийн бүстэй харьцахын тулд <strong>lubridate</strong>-д хэд хэдэн туслах функцууд байдаг бөгөөд эдгээрийг огнооны объектын цагийн бүсийг орон нутгийн цагийн бүсээс өөр цагийн бүс болгон өөрчлөхөд ашиглаж болно. Datetime объектод tz өгөгдлийн сангийн хүчинтэй цагийн бүсийг өгөх замаар цагийн бүсийг тохируулдаг. Эдгээрийн жагсаалтыг доорх линкээс олж болно - хэрэв таны ашиглаж байгаа байршил энэ жагсаалтад байхгүй бол цагийн бүсийн ойролцоох томоохон хотуудын цагийн бүсийг ашиглаж болно.</p>
<p><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" class="uri">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></p>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># баганад одоогийн цагийг оноох</span>
<span class="va">time_now</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">time_now</span></code></pre></div>
<pre><code>## [1] "2022-01-05 18:16:54 +08"</code></pre>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># with_tz()-г ашиглан цагийг ӨӨРЧЛӨХИЙН зэрэгцээ баганад шинэ цагийн бүс оноох</span>
<span class="va">time_london_real</span> <span class="op">&lt;-</span> <span class="fu">with_tz</span><span class="op">(</span><span class="va">time_now</span>, <span class="st">"Europe/London"</span><span class="op">)</span>

<span class="co"># force_tz()-г ашиглан цагийг хэвээр ХАДГАЛАХЫН зэрэгцээ баганад шинэ цагийн бүс оноох</span>
<span class="va">time_london_local</span> <span class="op">&lt;-</span> <span class="fu">force_tz</span><span class="op">(</span><span class="va">time_now</span>, <span class="st">"Europe/London"</span><span class="op">)</span>


<span class="co"># Энэ кодыг ажиллуулахад ашигласан компьютерийг Лондонгийн цагаар тохируулаагүй тохиолдолд цагийн зөрүү (компьютерийн цагийн бүсээс Лондон хүртэлх цагийн зөрүү) байх болно гэдгийг анхаарна уу.</span>
<span class="va">time_london_real</span> <span class="op">-</span> <span class="va">time_london_local</span></code></pre></div>
<pre><code>## Time difference of -8 hours</code></pre>
<p>Энэ нь хийсвэр мэт санагдаж болох бөгөөд хэрэв хэрэглэгч өөр цагийн бүстэй датан дээр ажиллахгүй тохиолдолд ихэвчлэн шаардлагагүй байдаг.</p>
<!-- ======================================================= -->
</div>
<div id="хоцрох-болон-түрүүлэх-тооцоолол" class="section level2" number="9.11">
<h2>
<span class="header-section-number">9.11</span> Хоцрох болон түрүүлэх тооцоолол<a class="anchor" aria-label="anchor" href="#%D1%85%D0%BE%D1%86%D1%80%D0%BE%D1%85-%D0%B1%D0%BE%D0%BB%D0%BE%D0%BD-%D1%82%D2%AF%D1%80%D2%AF%D2%AF%D0%BB%D1%8D%D1%85-%D1%82%D0%BE%D0%BE%D1%86%D0%BE%D0%BE%D0%BB%D0%BE%D0%BB"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lead()</a></code> болон <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag()</a></code> нь <strong>dplyr</strong> багцын функцууд бөгөөд ихэвчлэн тоон эсвэл огнооны векторын өмнөх (хоцорсон) эсвэл дараагийн (түрүүлсэн) утгуудыг олоход тусалдаг. Энэ нь цаг хугацааны нэгж хоорондын өөрчлөлт/ялгааг тооцоолоход хэрэг болно.</p>
<p>Та одоогийн болон өмнөх долоо хоногийн тохиолдлын зөрүүг тооцоолохыг хүсч байна гэж бодъё. Датаг доор үзүүлсэн шиг долоо хоног бүрийн тоогоор эхний байдлаар өгсөн байна.</p>
<div id="htmlwidget-4c8055b9a4078c84a9ac" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4c8055b9a4078c84a9ac">{"x":{"filter":"none","vertical":false,"data":[["2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"],[0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19,0]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week_start<\/th>\n      <th>cases_wk<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p><strong><code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag()</a></code> эсвэл <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lead()</a></code>-ийг ашиглах үед датафрэймийн мөрүүдийн дараалал нь маш чухал юм! - Таны огноо/тоо өсөх эсвэл буурах дараалалтай эсэхийг анхаарч үзээрэй</strong></p>
<p>Эхлээд өмнөх (хоцорсон) долоо хоногийн утгыг агуулсан шинэ багана үүсгэ.</p>
<ul>
<li><p><code>n =</code> (сөрөг бус бүхэл тоо байх ёстой) аргумент ашиглан ухрах/урагшлах нэгжийн тоог тохируулна</p></li>
<li><p>Байхгүй мөрүүдэд (жишээ нь, хоцорсон утга байх боломжгүй эхний мөр) байршуулсан утгыг тодорхойлохын тулд <code>default =</code> аргументыг ашиглана уу. Анхдагч байдлаар энэ нь <code>NA</code> байна.</p></li>
<li><p>Хэрэв датаны мөрүүд таны лавлах баганаар эрэмбэлэгдээгүй бол <code>order_by = TRUE</code> аргументыг ашиглана.</p></li>
</ul>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">counts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cases_prev_wk <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span><span class="op">(</span><span class="va">cases_wk</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-0f3931245d310f7ed6db" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0f3931245d310f7ed6db">{"x":{"filter":"none","vertical":false,"data":[["2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"],[0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19,0],[null,0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week_start<\/th>\n      <th>cases_wk<\/th>\n      <th>cases_prev_wk<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Дараа нь хоёр тохиолдлын баганын ялгаа болох шинэ багана үүсгэ:</p>
<div class="sourceCode" id="cb397"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">counts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cases_prev_wk <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span><span class="op">(</span><span class="va">cases_wk</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
         case_diff <span class="op">=</span> <span class="va">cases_wk</span> <span class="op">-</span> <span class="va">cases_prev_wk</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-3474dda7cf15d12a5571" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3474dda7cf15d12a5571">{"x":{"filter":"none","vertical":false,"data":[["2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"],[0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19,0],[null,0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19],[null,25,34,31,-25,14,-38,6,-16,1,-4,0,48,-35,29,20,34,154,93,-42,-152,-108,8,20,3,-61,-20,-19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week_start<\/th>\n      <th>cases_wk<\/th>\n      <th>cases_prev_wk<\/th>\n      <th>case_diff<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Та <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lead()</a></code> болон <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag()</a></code>-ын талаар <a href="https://dplyr.tidyverse.org/reference/lead-lag.html">эндээс</a> эсвэл консол дээрээ <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">?lag</a></code> гэж оруулснаар дэлгэрэнгүй уншиж болно.</p>
<!-- ======================================================= -->
</div>
<div id="нэмэлт-материалууд" class="section level2" number="9.12">
<h2>
<span class="header-section-number">9.12</span> Нэмэлт материалууд<a class="anchor" aria-label="anchor" href="#%D0%BD%D1%8D%D0%BC%D1%8D%D0%BB%D1%82-%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%83%D1%83%D0%B4"><i class="fas fa-link"></i></a>
</h2>
<p>lubridate багцын <a href="https://lubridate.tidyverse.org/">tidyverse хуудас</a></p>
<p>lubridate багцын RStudio <a href="https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf">cheatsheet</a></p>
<p>R for Data Science номын <a href="https://r4ds.had.co.nz/dates-and-times.html">огноо, цагийн тухай хэсэг</a></p>
<p><a href="https://www.statmethods.net/input/dates.html">Онлайн хичээл</a> <a href="https://www.r-bloggers.com/2013/08/date-formats-in-r/">Огнооны форматууд</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="%D0%B4%D0%B0%D1%82%D0%B0-%D1%86%D1%8D%D0%B2%D1%8D%D1%80%D0%BB%D1%8D%D0%B3%D1%8D%D1%8D-%D0%B1%D0%B0-%D2%AF%D0%BD%D0%B4%D1%81%D1%8D%D0%BD-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D1%83%D1%83%D0%B4.html"><span class="header-section-number">8</span> Дата цэвэрлэгээ ба үндсэн функцууд</a></div>
<div class="next"><a href="%D0%BA%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80-%D0%B1%D0%B0-%D1%81%D1%82%D1%80%D0%B8%D0%BD%D0%B3%D1%81.html"><span class="header-section-number">10</span> Карактер ба стрингс</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85-%D0%BD%D1%8C"><span class="header-section-number">9</span> Огноотой ажиллах нь</a></li>
<li>
<a class="nav-link" href="#%D0%B1%D1%8D%D0%BB%D1%82%D0%B3%D1%8D%D0%BB"><span class="header-section-number">9.1</span> Бэлтгэл</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D0%B1%D0%B0%D0%B3%D1%86%D1%83%D1%83%D0%B4%D1%8B%D0%B3-%D0%B0%D1%87%D0%B0%D0%B0%D0%BB%D0%B0%D1%85">Багцуудыг ачаалах</a></li>
<li><a class="nav-link" href="#%D0%B4%D0%B0%D1%82%D0%B0-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%BB%D0%BE%D1%85-1">Дата импортлох</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%D0%BE%D0%B4%D0%BE%D0%BE%D0%B3%D0%B8%D0%B9%D0%BD-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE"><span class="header-section-number">9.2</span> Одоогийн огноо</a></li>
<li>
<a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE-%D1%80%D1%83%D1%83-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85"><span class="header-section-number">9.3</span> Огноо руу хөрвүүлэх</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#base-r">base R</a></li>
<li><a class="nav-link" href="#lubridate">lubridate</a></li>
<li><a class="nav-link" href="#%D0%B1%D0%B0%D0%B3%D0%B0%D0%BD%D1%83%D1%83%D0%B4%D1%8B%D0%B3-%D0%BD%D1%8D%D0%B3%D1%82%D0%B3%D1%8D%D1%85">Багануудыг нэгтгэх</a></li>
</ul>
</li>
<li><a class="nav-link" href="#excel-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE"><span class="header-section-number">9.4</span> Excel огноо</a></li>
<li><a class="nav-link" href="#%D1%8D%D0%BC%D1%85-%D1%86%D1%8D%D0%B3%D1%86%D0%B3%D2%AF%D0%B9-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE"><span class="header-section-number">9.5</span> Эмх цэгцгүй огноо</a></li>
<li>
<a class="nav-link" href="#date-time-%D0%B0%D0%BD%D0%B3%D0%B8%D1%82%D0%B0%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85"><span class="header-section-number">9.6</span> date-time ангитай ажиллах</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D1%86%D0%B0%D0%B3-%D0%B0%D0%B3%D1%83%D1%83%D0%BB%D1%81%D0%B0%D0%BD-%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%B3-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85">Цаг агуулсан огноог хөрвүүлэх</a></li>
<li><a class="nav-link" href="#%D0%B7%D3%A9%D0%B2%D1%85%D3%A9%D0%BD-%D1%86%D0%B0%D0%B3%D0%B8%D0%B9%D0%B3-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85">Зөвхөн цагийг хөрвүүлэх</a></li>
<li><a class="nav-link" href="#%D1%86%D0%B0%D0%B3%D0%B8%D0%B9%D0%B3-%D0%B3%D0%B0%D1%80%D0%B3%D0%B0%D0%B6-%D0%B0%D0%B2%D0%B0%D1%85">Цагийг гаргаж авах</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%82%D0%BE%D0%B9-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D1%85"><span class="header-section-number">9.7</span> Огноотой ажиллах</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%BD%D1%8B-%D0%B1%D2%AF%D1%80%D1%8D%D0%BB%D0%B4%D1%8D%D1%85%D2%AF%D2%AF%D0%BD-%D1%85%D1%8D%D1%81%D0%B3%D2%AF%D2%AF%D0%B4%D0%B8%D0%B9%D0%B3-%D0%B3%D0%B0%D1%80%D0%B3%D0%B0%D0%B6-%D0%B0%D0%B2%D0%B0%D1%85">Огнооны бүрэлдэхүүн хэсгүүдийг гаргаж авах</a></li>
<li><a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%BD%D1%8B-%D0%BC%D0%B0%D1%82%D0%B5%D0%BC%D0%B0%D1%82%D0%B8%D0%BA">Огнооны математик</a></li>
<li><a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D0%BD%D1%8B-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB">Огнооны интервал</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE-%D1%85%D0%B0%D1%80%D1%83%D1%83%D0%BB%D0%B0%D1%85"><span class="header-section-number">9.8</span> Огноо харуулах</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#format">format()</a></li>
<li><a class="nav-link" href="#%D1%81%D0%B0%D1%80-%D0%B6%D0%B8%D0%BB">Сар-жил</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#dates_epi_wks"><span class="header-section-number">9.9</span> Эпидемиологийн долоо хоног</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#lubridate-1">lubridate</a></li>
<li><a class="nav-link" href="#%D0%B4%D0%BE%D0%BB%D0%BE%D0%BE-%D1%85%D0%BE%D0%BD%D0%BE%D0%B3-%D1%82%D1%83%D1%82%D0%BC%D1%8B%D0%BD-%D1%82%D0%BE%D0%BE">Долоо хоног тутмын тоо</a></li>
<li><a class="nav-link" href="#epiweek-%D1%85%D1%83%D0%B2%D0%B8%D0%BB%D0%B1%D0%B0%D1%80%D1%83%D1%83%D0%B4">Epiweek хувилбарууд</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%D0%BE%D0%B3%D0%BD%D0%BE%D0%BE%D1%86%D0%B0%D0%B3%D0%B8%D0%B9%D0%BD-%D0%B1%D2%AF%D1%81%D0%B8%D0%B9%D0%B3-%D1%85%D3%A9%D1%80%D0%B2%D2%AF%D2%AF%D0%BB%D1%8D%D1%85"><span class="header-section-number">9.10</span> Огноо/цагийн бүсийг хөрвүүлэх</a></li>
<li><a class="nav-link" href="#%D1%85%D0%BE%D1%86%D1%80%D0%BE%D1%85-%D0%B1%D0%BE%D0%BB%D0%BE%D0%BD-%D1%82%D2%AF%D1%80%D2%AF%D2%AF%D0%BB%D1%8D%D1%85-%D1%82%D0%BE%D0%BE%D1%86%D0%BE%D0%BE%D0%BB%D0%BE%D0%BB"><span class="header-section-number">9.11</span> Хоцрох болон түрүүлэх тооцоолол</a></li>
<li><a class="nav-link" href="#%D0%BD%D1%8D%D0%BC%D1%8D%D0%BB%D1%82-%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%83%D1%83%D0%B4"><span class="header-section-number">9.12</span> Нэмэлт материалууд</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Тархвар судлаачийн R гарын авлага</strong>" was written by гарын авлагын баг. It was last built on 2022-01-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
