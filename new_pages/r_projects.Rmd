
# R төсөл {}  

R төсөл нь таны файлуудын иж бүрдэл болсон зөөвөрлөхөд хялбар, бие даасан хавтас юм. Бүх скрипт код, дата файлууд, зураг/үр дүн, үйлдлийн түүх зэрэг нь R төсөл доторх дэд хавтсанд хадгалагддаг. Мөн R төслийн үндсэн хавтас *ажлын байрлал (working directory)* болж өгдгөөрөө онцлог.

## Санал болгож буй хэрэглээ
R-ыг үр өгөөжтэй, амархан, ердийн хэрэглээ болгохын тулд дараах гурван элементийг хавсарч хэрэглэдэг. *One discrete work project is hosted within one R project.* Элемент тус бүрийг дараах хэсгүүдэд тайлбарлав.


1) **R төсөл**  
     - өгөгдөл, код, үр дүн зэргийг тус бүр дэд хавтсанд агуулсан бие даасан ажлын орчин.
2) Файлын холбоотой замд зориулсан **here** багц  
     - Файлын зам R төслийн үндсэн хавтаст холбоотой байдлаар бичигддэг. Энэ талаар [Import and export] хэсэгт илүү дэлгэрүүлж үзнэ үү
3) Файл импорт/экспорт хийхэд зориулсан **rio** багц  
     - `import()` болон `export()` функцууд ямар ч өргөтгөлтэй файлтай ажиллаж чаддаг (.csv, .xlsx, .png г.м).  
     
     
<!-- ======================================================= -->
## R төсөл үүсгэх {}

R төсөл үүсгэхийн тулд File (файл) цэсний “New Project” (шинэ төсөл) -ыг сонго.

* Тухайн төсөлд зориулж шинэ хавтас нээх бол “New directory” (шинэ байрлал) –ыг сонгож хаана үүсгэхээ зааж өгнө.
* Төслийг хуучин хавтаст хадгалах бол “Existing directory” (хуучин байрлал) –ыг сонгож хадгалах хавтсаа зааж өгнө.
* Github –ын агуулахад файлаа хувилах бол “Version Control”-ыг сонгоод дараа нь “Git”-ыг сонгоно [Version control and collaboration with Git and Github] хэсгээс дэлгэрүүлж харж болно.


```{r out.width = "75%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "create_project.png"))
```

Шинээр үүсгэсэн R төслийн хавтас *.Rproj* гэсэн өргөтгөлтэй файл агуулсан байна. Энэ файл нь тухайн төслийг нээх шууд холбоос болдог. Төслийг нээх өрр арга бол File цэснээс “Open Project” (төсөл нээх) –ийг сонгож болдог. Мөн RStudio-ын хамгийн баруун дээд буланд байрлах R төслийн лого болон арынх нь цэс дээр дарж болно. 

R төслөөс гарахдаа шинэ төсөл нээ эсвэл тухайн төслийг хаа (File - Close Project).


### Төслүүдийг сэлгэх {.unnumbered}

Төслүүдийн хооронд сэлгэж ажиллахын тулд RStudio-ын хамгийн баруун дээд буланд байрлах R төслийн лого болон арынх нь цэс дээр дар. Цэсийг нээснээр Close Project (төслийг хаах), Open Project (төслийг нээх) болон сүүлд ажиллаж байсан төслүүдийн нэр бүхий сонголтууд гарч ирнэ.


```{r out.width = "100%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "Rproject_dropdown.png"))
```


### Тохируулга {.unnumbered}  


Rstudio-г асаахдаа "цэвэр хуудас" тайгаар эхлүүлэхийг зөвлөж байна. Өөрөөр хэлбэл өмнө нь хийж байсан ажлын код, бичиглэл ажлын талбайд **байхгүй** хоосон байна гэсэн үг. Энэ нь таны өмнө нь үүсгэсэн обьект, гарсан үр дүнгүүд R нээгдэх болгонд гарч ирэхгүй байхгүй байхыг хэлнэ (хэрэв шаардлагатай бол скрипт кодоо уншуулж дахин үүсгэж болно). Ингэснээр чанартай код бичигддэг ба хэтдээ алдаа бага гаргадаг. 

"Цэвэр хуудас"-аас эхлүүлэхийн тулд:

* Tools (багаж) цэснээс “Project Options”-г сонго.
* "General" хэсэгт буй сонголтуудад RStudio-г нээхэд .RData-г ажлын талбайд *хадгалахгүй*, RStudio-оос гарахад .RData -г ажлын талбайд *хадгалахгүй* гэж тохируул. 


### Бүтэц {.unnumbered}  

Төслийн үндсэн хавтас дотор дэд хавтас нээх нь элбэг. Ийм тохиолдолд “дата”, "скрипт/код", “зураг”, “илтгэл” гэх мэтээр хавтсаа нэрлэх нь тохиромжтой. Шинэ хавтсыг жирийн хавтас нээдэг шигээ үүсгэнэ. R коммандаар хэрхэн шууд шинэ хавтас үүсгэхийг [Directory interactions] хэсгээс харна уу.


### Хувилбаруудыг хянах {.unnumbered}  

Файлын өөр өөр хувилбаруудыг хянах системийг бий болгоорой. Үүний хамгийн энгийн жишээ гэвэл скрипттэй файлдаа огноотой нэр   (“transmission_analysis_2020-10-03.R” г.м) өгөөд "архив" дэд хавтаст хадгалах юм. Мөн скриптийн толгой хэсэгт (header) тайлбар, зохиогч, гарчиг, өөрчлөлтийн дугаар, нэр зэргийг оруулж болно.

Файлын хувилбарыг хянах арай нарийн арга бол Github болон бусад төстэй платформуудыг ашиглах юм. [Version control and collaboration with Git and Github] хэсгээс энэ талаар дэлгэрүүлж уншна уу.

Edit цэсний “Find in Files” -г сонгож төслийн бүх файлд хайлтыг зэрэг хийж болдог.  Энэ үйлдлээр зөвхөн хайгаад зогсохгүй аливаа текстийг олон файлуудад зэрэг өөрчлөх боломжтой. 


## Жишээ  


Доорх кодонд `here()` функцээр файл импортлох, экспортлох, хадгалах жишээ харуулав. **here** багцыг хэрхэн ашиглах талаар дэлгэрүүлж [Import and export] хэсгээс харна уу.


*R төслийн “data” хавтаснаас `linelist_raw.xlsx` гэсэн файлыг импортлох*  

```{r eval=F}
linelist <- import(here("data", "linelist_raw.xlsx"))
```

*`linelist`гэсэн R обьектийг “my_linelist.rds” гэсэн өргөтгөлтэйгээр өөрийн R төсөл доторх “data” хавтсын “clean” хавтаст экспортлох.*   

```{r, eval=F}
export(linelist, here("data","clean", "my_linelist.rds"))
```

*Хамгийн сүүлд үүсгэсэн графикийг “epicurve_2021-02-15.png” гэсэн нэртэйгээр өөрийн R төсөл доторх “outputs” хавтсын “epicurves” хавтаст хадгалах.*  

```{r, eval=F}
ggsave(here("outputs", "epicurves", "epicurve_2021-02-15.png"))
```


<!-- ======================================================= -->
##Эх сурвалж {}

RStudio –ын веб хуудсанд буй [using R projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)





